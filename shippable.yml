machine:
  node:
    version: 0.10.25
  services:
    - docker

dependencies:
  pre:
    - node --version
    - mkdir -p ./anononthefly/testresults
    - mkdir -p ./anononthefly/codecoverage
  override:
    - grunt
  post:
    - ./node_modules/.bin/istanbul cover grunt -- -u tdd
    - ./node_modules/.bin/istanbul report cobertura --dir  ./anononthefly/codecoverage/

deployment:
  hub:
    branch: master
    commands:
      - docker login -e anononthefly@gmail.com -u anononthefly -p anonthefly
      - docker push anononthefly/neptune-api
